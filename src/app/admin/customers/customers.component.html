<div class="container">
  <div class="card">
    <h3 class="card-header text-center font-weight-bold text-uppercase py-4">Customers</h3>
    <div class="card-body">
      <div class="table-editable" id="table">
        <div class="columns">
          <div class="column">
            <input type="text" class="form-control searchCustomer"  placeholder="search customer" name="search" [(ngModel)]="filter" >
          </div>
<!--          <div class="column">-->
<!--            <input class="form-control"  placeholder="filter by date "#dp="bsDatepicker" bsDatepicker [(ngModel)]="datePicker" [bsConfig]="{containerClass:'theme-blue'}">-->
<!--          </div>-->
        </div>
             <span class="table-add float-right mb-3 mr-2">
                <a>
                <i (click)="openInsert()" class="fas fa-plus"></i>
                </a>
            </span>
        <app-admin-filters></app-admin-filters>
        <table class="table table-bordered table-responsive-md table-striped text-center" id="contentToConvert">
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>City</th>
            <th>Phone Number</th>
            <th>Record Status</th>
            <th>Create Time</th>
            <th>Update Time</th>
            <th>Delete Time</th>
            <th>Description</th>
            <th>Version</th>
            <th> </th>
            <th> </th>
          </tr>
          <tr *ngFor="let c of customersList | pipeFilteer:filter  ">
            <td>{{c.name}}</td>
            <td>{{c?.email}}</td>
            <td>{{transformCity(c.addresses)}}</td>
            <td>{{transformNumber(c.phoneNumbers) }}</td>
            <td>{{c.recordStatus}}</td>
            <td>{{c.createDateTime | date:'dd-MM-yyyy'}}</td>
            <td>{{c.updateDateTime| date:'dd-MM-yyyy'}}</td>
            <td>{{c.deletedDateTime| date:'dd-MM-yyyy'}}</td>
            <td>{{c.description}}</td>
            <td>{{c.version}}</td>
            <td></td>
            <td>
              <a>
                <i
                  (click)="openUpdate(
                c.id,
                c.email,
                c.phoneNumbers.phoneNumber,
                c.addresses.city,
                c.recordStatus,
                c.updateDateTime,
                c.deletedDateTime,
                c.description,
                c.version) "
                  class="far fa-edit"></i>
              </a>
              <i (click)="openDelete(c.id)" class="fa fa-trash" aria-hidden="true"></i>
            </td>
          </tr>
        </table>
        <button type="button" class="btn btn-outline-secondary btnPDF" (click)="captureScreen()">PDF</button>
      </div>
    </div>
  </div>

  <div [ngClass]="{ 'is-active' : deleteModal }" class="modal">
    <div (click)="toggleModal()" class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Delete Customer</p>
        <button (click)="toggleModal()" aria-label="close" class="delete"></button>
      </header>
      <section class="modal-card-body">
        <p><strong>Are you sure you want to delete this Customer ?</strong></p>
        <p>All information associated to this customer will be permanently deleted.
          <br>
          <span class="has-text-danger">This operation can not be undone!</span>
      </section>
      <footer class="modal-card-foot">
        <button (click)="onDelete()" class="button is-danger">Delete</button>
        <button (click)="toggleModal()" class="button">Cancel</button>
      </footer>
    </div>
  </div>





  <div [ngClass]="{ 'is-active' : insertModal }" class="modal">
    <div (click)="closeInsertModal()" class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Insert Customer</p>
        <button (click)="closeInsertModal()" aria-label="close" class="delete"></button>
      </header>
      <section class="modal-card-body">
        <form (ngSubmit)="onSubmit( )" [formGroup]="customersForm">
          <span> Name </span>
          <input class="form-control"
                 formControlName="name"
                 type="text">
          <span> Email </span>
          <input class="form-control"
                 formControlName="email"
                 type="email">
          <div formArrayName="addresses" *ngFor="let item of addressesArray['controls']; let i = index">
            <div [formGroupName]="i">
              <span> Address </span>
              <div class="columns">
                <div class="column">
                  <input class="form-control" formControlName="city"
                         placeholder="City"
                         type="text">
                </div>
                <div class="column">
                  <input class="form-control" formControlName="street"
                         placeholder="Street"
                         type="text">
                </div>
                <div class="column">
                  <input class="form-control" formControlName="country"
                         placeholder="Country"
                         type="text">
                </div>
                <div class="column">
                  <input class="form-control" formControlName="zip_code"
                         placeholder="Zip Code"
                         type="text">
                </div>
              </div>
            </div>
          </div>
          <span> Phone Number</span>
          <div formArrayName="phoneNumbers" *ngFor="let item of phoneNumbersArray['controls']; let i = index">
            <div [formGroupName]="i">
              <input class="form-control" formControlName="phoneNumber"
                     type="text">
            </div>
          </div>
          <span> Record Status </span>
          <input  class="form-control" formControlName="recordStatus"
                 type="text">
          <span> Description </span>
          <div class="control">
            <textarea formControlName="description" class="textarea" placeholder="Add your description here! "></textarea>
          </div>
        </form>
      </section>
      <footer class="modal-card-foot">
        <button (click)="onSubmit()" class="button is-danger">Submit</button>
        <button (click)="closeInsertModal()" class="button">Cancel</button>
      </footer>
    </div>
  </div>




  <div [ngClass]="{ 'is-active' : updateModal }" class="modal">
    <div (click)="closeUpdateModal()" class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Update Customer</p>
        <button (click)="closeUpdateModal()" aria-label="close" class="delete"></button>
      </header>
      <section class="modal-card-body">
        <form (ngSubmit)="onUpdate( )" [formGroup]="customersForm">
          <span> Name </span>
          <input class="form-control"
                 formControlName="name"
                 type="text">
          <span> Email </span>
          <input class="form-control"
                 formControlName="email"
                 type="email">
          <div formArrayName="addresses" *ngFor="let item of addressesArray['controls']; let i = index">
            <div [formGroupName]="i">
              <span> Address </span>
              <div class="columns">
                <div class="column">
                  <input class="form-control" formControlName="city"
                         placeholder="City"
                         type="text">
                </div>
                <div class="column">
                  <input class="form-control" formControlName="street"
                         placeholder="Street"
                         type="text">
                </div>
                <div class="column">
                  <input class="form-control" formControlName="country"
                         placeholder="Country"
                         type="text">
                </div>
                <div class="column">
                  <input class="form-control" formControlName="zip_code"
                         placeholder="Zip Code"
                         type="text">
                </div>
              </div>
            </div>
          </div>
          <span> Phone Number</span>
          <div formArrayName="phoneNumbers" *ngFor="let item of phoneNumbersArray['controls']; let i = index">
            <div [formGroupName]="i">
              <input class="form-control" formControlName="phoneNumber"
                     type="text">
            </div>
          </div>
          <span> Record Status </span>
          <input class="form-control" formControlName="recordStatus"
                 type="email">
          <span> Description </span>
          <div class="control">
            <textarea formControlName="description" class="textarea" placeholder="Add your description here! "></textarea>
          </div>
        </form>
      </section>
      <footer class="modal-card-foot">
        <button (click)="onUpdate()" class="button is-danger">Save</button>
        <button (click)="closeUpdateModal()" class="button">Cancel</button>
      </footer>
    </div>
  </div>























